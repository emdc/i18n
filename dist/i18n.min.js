!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.i18n=t(require("react")):e.i18n=t(e.React)}(window,(function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(t,a){t.exports=e},function(e,t,a){e.exports=a(2)},function(e,t,a){"use strict";a.r(t);const n=(e,t,a=null)=>{if(!e||"object"!=typeof e)return null;if("string"!=typeof t)return null;const n=t.split(".");let r=e;for(let e=0;e<n.length;e+=1)r=r[n[e]];return r||a},r=e=>e&&"object"==typeof e&&!Array.isArray(e),l=(e,...t)=>{if(!t.length)return e;const a=t.shift();if(null==e&&(e={}),r(e)&&r(a))for(const t in a)r(a[t])?(e[t]||Object.assign(e,{[t]:{}}),l(e[t],a[t])):Object.assign(e,{[t]:a[t]});return l(e,...t)};var o=a(0);class c extends o.PureComponent{constructor(e){super(e),this.state={locale:null},c.instance=this,this.setLocale=this.setLocale.bind(this)}setLocale(e){this.setState(()=>({locale:e}))}render(){return o.cloneElement(this.props.children,{...this.props.children.props,currentLocale:this.state.locale})}}Object.defineProperty(c,"instance",{enumerable:!1,configurable:!1,writable:!0});var i=c;var s=new class{constructor(){this._locales={},this._data={},this._currentLocale=null,this._fallbackLocale=null}get currentLocale(){return this._currentLocale}get fallbackLocale(){return this._fallbackLocale}setLocale(e){if(e)this._currentLocale=e;else{if(!this._fallbackLocale)throw new Error(`[@emdc/i18n] Try to change locale to "${e}", but no fallback locale found.`);this._currentLocale=this._fallbackLocale}i.instance&&i.instance.setLocale(this._currentLocale)}setFallbackLocale(e){this._fallbackLocale=e}addTranslations(e,t){Object.keys(e).forEach(a=>{this._locales[a]||(this._locales[a]=a),this._data[a]||(this._data[a]={}),this._data[a][t]=l(this._data[a][t],e[a])})}translate(e,t,a=this.currentLocale){if(!e||"string"!=typeof e)throw new Error(`[@emdc/i18n] Invalid component name: "${e}". Name should be a string.`);if(!t||"string"!=typeof t)throw new Error(`[@emdc/i18n] Invalid label path for component "${e}". Path: "${t}", it should be a string.`);if(!a)return console.warn(`[@emdc/i18n] Invalid locale: "${a}"`),t;let n=this._getLabelByLocale(e,t,a);if(n||(n=this._getLabelByFallbackLocale(e,t)),"string"!=typeof n)throw new Error(`[@emdc/i18n] Label by path "${t}" isn't string. Specify the path or check the list of translations.`);return n}_getLabelByLocale(e,t,a){return this._data[a]?n(this._data[a][e],t):null}_getLabelByFallbackLocale(e,t){return this.fallbackLocale&&this._data[this.fallbackLocale]?(console.warn(`[@emdc/i18n] Using fallback locale "${this.fallbackLocale}" for translate ${e}:${t}`),n(this._data[this.fallbackLocale][e],t,t)):t}};function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var f=(e,t)=>a=>{const n=a.displayName||a.name,r=t||n,l=`localize(${n})`;if(!r||""===r)throw new Error(`[@emdc/i18n] Component name is "${r}". Name should be a non-empty string.`);s.addTranslations(e,r);const c=(e,t)=>s.translate(r,e,t),i=e=>o.createElement(a,u({},e,{currentLocale:s.currentLocale,setLocale:s.setLocale.bind(s),translate:c}));return i.displayName=l,i.localizableName=t||n,i.WrappedComponent=a,a.translate=c,a.setLocale=s.setLocale.bind(s),i};a.d(t,"LocaleStorage",(function(){return s}));const d={Provider:i,localize:f,setLocale:s.setLocale.bind(s),setFallbackLocale:s.setFallbackLocale.bind(s),translate:s.translate.bind(s)};t.default=d}])}));
